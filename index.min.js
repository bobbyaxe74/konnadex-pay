(()=>{"use strict";var t={"./src/types/index.ts":
/*!****************************!*\
  !*** ./src/types/index.ts ***!
  \****************************/(e,n,t)=>{t.r(n),t.d(n,{BEARER:()=>a,BLOCKNETWORK:()=>i,CURRENCY:()=>r,ENVIRONMENT:()=>o,LIVE_BACKEND_URL:()=>d,LIVE_SDK_URL:()=>c,TEST_BACKEND_URL:()=>l,TEST_SDK_URL:()=>p,supportedProps:()=>s}),(t=o=o||{}).DEVELOPMENT="DEVELOPMENT",t.PRODUCTION="PRODUCTION",t.TEST="TEST",(n=i=i||{}).BINANCE="BINANCE",n.ETHEREUM="ETHEREUM",n.POLYGON="POLYGON",(r=r||{}).USDT="USDT",(t=a=a||{}).MERCHANT="MERCHANT",t.CUSTOMER="CUSTOMER";var o,i,r,a,s=["key","reference","env","email","name","description","currency","amount","onSuccess","onError","onClose"],d="https://api.konnadex.com/v1/collections/fiat-currency",l="https://staging.konnadex.com/v1/collections/fiat-currency",c="https://konna-pay-hosted-sdk.vercel.app/contract",p="https://crypto-hosted-sdk.vercel.app/contract"},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/(e,n,t)=>{t.r(n),t.d(n,{utils:()=>i});var o=t(/*! ./types */"./src/types/index.ts"),i=function(e){var l=e==o.ENVIRONMENT.DEVELOPMENT?o.TEST_SDK_URL:o.LIVE_SDK_URL,c="pay-frame-id",p="pay-widget-wrapper";function u(){var e=document.getElementById(p);document.body.removeChild(e)}return{openWidget:function(){var e=document.getElementById(p),n=document.getElementById("pay-app-loader"),t=document.getElementById(c);e.style.visibility="visible",e.style.display="flex",n.style.display="block",setTimeout(function(){var e=document.getElementById(p);e.style.display="flex",t.style.display="block",[e,t].forEach(function(e){e.style.visibility="visible",e.focus({preventScroll:!1})})},1500)},closeWidget:u,init:function(e){var n=e.title,t=e.config;document.getElementById(p)&&document.getElementById(c)&&u();(e=document.createElement("style")).innerText=m,document.head.appendChild(e);var e=document.createElement("div"),o=document.createElement("div");e.setAttribute("id","pay-app-loader"),e.classList.add("app-loader"),o.classList.add("app-loader__spinner");for(var i=0;i<12;i++){var r=document.createElement("div");o.appendChild(r)}e.appendChild(o);var a=new URL(l),s=document.createElement("div"),d=(s.setAttribute("id",p),s.setAttribute("style",y),document.body.insertBefore(s,document.body.childNodes[0]),document.getElementById(p).appendChild(e),document.createElement("iframe"));return[{key:"src",val:a.href},{key:"style",val:f},{key:"id",val:c},{key:"allowfullscreen",val:"true"},{key:"allowpaymentrequest",val:"true"},{key:"title",val:n},{key:"sandbox",val:"allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-popups"}].forEach(function(e){var n=e.key,e=e.val;return d.setAttribute(n,e)}),d.onload=function(){d.contentWindow.postMessage({type:"konnaInitData",config:t},l)},document.getElementById(p).appendChild(d),window.closePayFrame=u,d}}},y="position:fixed;overflow: hidden;display: none;justify-content: center;align-items: center;z-index: 999999999;height: 100%;width: 100%;color: transparent;background: #F1F3F9;visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0;",f="position: fixed;display: none;overflow: hidden;z-index: 999999999;width: 100%;height: 100%;transition: opacity 0.3s ease 0s;visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0; border: none",m=".app-loader {\n  text-align: center;\n  color: white;\n  margin-right: -30px;\n  width: 100%;\n  position: fixed;\n  top: 30vh\n}\n@-webkit-keyframes app-loader__spinner {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.app-loader__spinner {\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n}\n.app-loader__spinner div {\n  position: absolute;\n  -webkit-animation: app-loader__spinner linear 1s infinite;\n  animation: app-loader__spinner linear 1s infinite;\n  background: black;\n  width: 20px;\n  height: 40px;\n  border-radius: 40%;\n  -webkit-transform-origin: 5px 65px;\n  transform-origin: 5px 65px;\n}\n.app-loader__spinner div:nth-child(1) {\n  -webkit-transform: rotate(0deg);\n  transform: rotate(0deg);\n  -webkit-animation-delay: -0.916666666666667s;\n  animation-delay: -0.916666666666667s;\n}\n.app-loader__spinner div:nth-child(2) {\n  -webkit-transform: rotate(30deg);\n  transform: rotate(30deg);\n  -webkit-animation-delay: -0.833333333333333s;\n  animation-delay: -0.833333333333333s;\n}\n.app-loader__spinner div:nth-child(3) {\n  -webkit-transform: rotate(60deg);\n  transform: rotate(60deg);\n  -webkit-animation-delay: -0.75s;\n  animation-delay: -0.75s;\n}\n.app-loader__spinner div:nth-child(4) {\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n  -webkit-animation-delay: -0.666666666666667s;\n  animation-delay: -0.666666666666667s;\n}\n.app-loader__spinner div:nth-child(5) {\n  -webkit-transform: rotate(120deg);\n  transform: rotate(120deg);\n  -webkit-animation-delay: -0.583333333333333s;\n  animation-delay: -0.583333333333333s;\n}\n.app-loader__spinner div:nth-child(6) {\n  -webkit-transform: rotate(150deg);\n  transform: rotate(150deg);\n  -webkit-animation-delay: -0.5s;\n  animation-delay: -0.5s;\n}\n.app-loader__spinner div:nth-child(7) {\n  -webkit-transform: rotate(180deg);\n  transform: rotate(180deg);\n  -webkit-animation-delay: -0.416666666666667s;\n  animation-delay: -0.416666666666667s;\n}\n.app-loader__spinner div:nth-child(8) {\n  -webkit-transform: rotate(210deg);\n  transform: rotate(210deg);\n  -webkit-animation-delay: -0.333333333333333s;\n  animation-delay: -0.333333333333333s;\n}\n.app-loader__spinner div:nth-child(9) {\n  -webkit-transform: rotate(240deg);\n  transform: rotate(240deg);\n  -webkit-animation-delay: -0.25s;\n  animation-delay: -0.25s;\n}\n.app-loader__spinner div:nth-child(10) {\n  -webkit-transform: rotate(270deg);\n  transform: rotate(270deg);\n  -webkit-animation-delay: -0.166666666666667s;\n  animation-delay: -0.166666666666667s;\n}\n.app-loader__spinner div:nth-child(11) {\n  -webkit-transform: rotate(300deg);\n  transform: rotate(300deg);\n  -webkit-animation-delay: -0.083333333333333s;\n  animation-delay: -0.083333333333333s;\n}\n.app-loader__spinner div:nth-child(12) {\n  -webkit-transform: rotate(330deg);\n  transform: rotate(330deg);\n  -webkit-animation-delay: 0s;\n  animation-delay: 0s;\n}\n.app-loader__spinner {\n  -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);\n  transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);\n}\n"}},o={};function i(e){var n=o[e];return void 0!==n||(n=o[e]={exports:{}},t[e](n,n.exports,i)),n.exports}i.d=(e,n)=>{for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var e={};{
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
i.r(e),i.d(e,{default:()=>p});var r=i(/*! ./types */"./src/types/index.ts"),a=i(/*! ./utils */"./src/utils.ts"),s=function(){return(s=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=function(e,a,s,d){return new(s=s||Promise)(function(t,n){function o(e){try{r(d.next(e))}catch(e){n(e)}}function i(e){try{r(d.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?t(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(o,i)}r((d=d.apply(e,a||[])).next())})},d=function(o,i){var r,a,s,d={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(t){return function(e){var n=[t,e];if(r)throw new TypeError("Generator is already executing.");for(;d=l&&n[l=0]?0:d;)try{if(r=1,a&&(s=2&n[0]?a.return:n[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,n[1])).done)return s;switch(a=0,(n=s?[2&n[0],s.value]:n)[0]){case 0:case 1:s=n;break;case 4:return d.label++,{value:n[1],done:!1};case 5:d.label++,a=n[1],n=[0];continue;case 7:n=d.ops.pop(),d.trys.pop();continue;default:if(!(s=0<(s=d.trys).length&&s[s.length-1])&&(6===n[0]||2===n[0])){d=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3]))d.label=n[1];else if(6===n[0]&&d.label<s[1])d.label=s[1],s=n;else{if(!(s&&d.label<s[2])){s[2]&&d.ops.pop(),d.trys.pop();continue}d.label=s[2],d.ops.push(n)}}n=i.call(o,d)}catch(e){n=[6,e],a=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}};function l(e){if(!(this instanceof l))return new l(e);var n=c(Object.keys(e),r.supportedProps);if(n.length)throw new Error("Unsupported props: ".concat(n.join(",")));n=(n="".concat(e.env).toUpperCase())!=r.ENVIRONMENT.PRODUCTION&&(n==r.ENVIRONMENT.DEVELOPMENT||n==r.ENVIRONMENT.TEST)?r.ENVIRONMENT.DEVELOPMENT:r.ENVIRONMENT.PRODUCTION;return e.env=n,l.prototype.config=s({bearer:r.BEARER.MERCHANT},e),l.prototype.utils=(0,a.utils)(n),this}l.prototype.initializePay=function(){return n(this,void 0,void 0,function(){var n,t;return d(this,function(e){switch(e.label){case 0:if(Object.values(this.config).length<7)throw new Error("Konnadex Misconguration,Check initilization Parameters.");return n=(this.config.env||"").toUpperCase(),n=n!=r.ENVIRONMENT.PRODUCTION&&(n==r.ENVIRONMENT.DEVELOPMENT||n==r.ENVIRONMENT.TEST)?r.TEST_BACKEND_URL:r.LIVE_BACKEND_URL,[4,fetch(n)];case 1:return[4,e.sent().json()];case 2:if((n=e.sent())&&400<=n.status)throw new Error("Error in payment service");if(n.includes(String(this.config.currency).toUpperCase()))return t=l.prototype.utils.init({title:"KonnadexConfig",config:{key:this.config.key,reference:this.config.reference,name:this.config.name,email:this.config.email,description:this.config.description,amount:this.config.amount,bearer:this.config.bearer,currency:this.config.currency,network:this.config.network,env:this.config.env}}),l.prototype.iframe=t,l.prototype.onSuccess=this.config.onSuccess,l.prototype.onError=this.config.onError,l.prototype.onClose=this.config.onClose,this.openPay(),[2];throw new Error("Unsupported currency: ".concat(this.config.currency))}})})};var c=function(e,n){return e.filter(function(e){return!n.includes(e)})};l.prototype.openPay=function(){l.prototype.utils.openWidget({config:this.config}),l.prototype.eventHandler=function(e){if(e.data.appOrigin===this.origin)switch(e.data.type){case"ready":document.getElementById("pay-app-loader").style.display="none";break;case"konna.success":l.prototype.success(e.data);break;case"konna.exit":console.log(e.data.type),l.prototype.close(e.data);break;case"konna.error":l.prototype.error(e.data);break;case"konna.copy":"clipboard"in navigator?navigator.clipboard.writeText(e.data.data.RECEPIENT):document.execCommand("copy",!0,e.data.data.RECEPIENT)}}.bind(this),window.addEventListener("message",this.eventHandler,!1)},l.prototype.close=function(e){window.removeEventListener("message",this.eventHandler,!1),this.onClose(e),l.prototype.utils.closeWidget()},l.prototype.success=function(e){this.onSuccess(e)},l.prototype.error=function(e){this.onError(e)},window&&(window.KonnadexCheckout=l);const p=l}})();