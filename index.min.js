(()=>{"use strict";var t={"./src/types/index.ts":
/*!****************************!*\
  !*** ./src/types/index.ts ***!
  \****************************/(e,n,t)=>{t.r(n),t.d(n,{BEARER:()=>i,BLOCKNETWORK:()=>r,CURRENCY:()=>a,ENVIRONMENT:()=>o,LIVE_BACKEND_URL:()=>l,LIVE_SDK_URL:()=>c,TEST_BACKEND_URL:()=>d,TEST_SDK_URL:()=>p,supportedProps:()=>s}),(t=o=o||{}).DEVELOPMENT="DEVELOPMENT",t.PRODUCTION="PRODUCTION",t.TEST="TEST",(n=r=r||{}).BINANCE="BINANCE",n.ETHEREUM="ETHEREUM",n.POLYGON="POLYGON",(a=a||{}).USDT="USDT",(t=i=i||{}).MERCHANT="MERCHANT",t.CUSTOMER="CUSTOMER";var o,r,a,i,s=["key","reference","amount","bearer","network","currency","env","metadata","theme","email","fullname","description","phone","address","extraInfo","onSuccess","onError","onClose"],l="https://api.konnadex.com/v1/collections/fiat-currency",d="https://staging.konnadex.com/v1/collections/fiat-currency",c="https://konna-pay-hosted-sdk.vercel.app/contract",p="http://localhost:3000"},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/(e,n,t)=>{t.r(n),t.d(n,{utils:()=>r});var o=t(/*! ./types */"./src/types/index.ts"),r=function(e){var d=e==o.ENVIRONMENT.DEVELOPMENT?o.TEST_SDK_URL:o.LIVE_SDK_URL,c="pay-frame-id",p="pay-widget-wrapper";function u(){var e=document.getElementById(p);document.body.removeChild(e)}return{openWidget:function(){var e=document.getElementById(p),n=document.getElementById("pay-app-loader"),t=document.getElementById(c);e.style.visibility="visible",e.style.display="flex",n.style.display="block",setTimeout(function(){var e=document.getElementById(p);e.style.display="flex",t.style.display="block",[e,t].forEach(function(e){e.style.visibility="visible",e.focus({preventScroll:!1})})},1500)},closeWidget:u,init:function(e){var n=e.title,t=e.config;document.getElementById(p)&&document.getElementById(c)&&u();(e=document.createElement("style")).innerText=m,document.head.appendChild(e);var e=document.createElement("div"),o=document.createElement("div");e.setAttribute("id","pay-app-loader"),e.classList.add("app-loader"),o.classList.add("app-loader__spinner");for(var r=0;r<12;r++){var a=document.createElement("div");o.appendChild(a)}e.appendChild(o);var i=new URL(d),s=document.createElement("div"),l=(s.setAttribute("id",p),s.setAttribute("style",y),document.body.insertBefore(s,document.body.childNodes[0]),document.getElementById(p).appendChild(e),document.createElement("iframe"));return[{key:"src",val:i.href},{key:"style",val:f},{key:"id",val:c},{key:"allowfullscreen",val:"true"},{key:"allowpaymentrequest",val:"true"},{key:"title",val:n},{key:"sandbox",val:"allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-popups"}].forEach(function(e){var n=e.key,e=e.val;return l.setAttribute(n,e)}),l.onload=function(){l.contentWindow.postMessage({type:"konnaInitData",config:t},d)},document.getElementById(p).appendChild(l),window.closePayFrame=u,l}}},y="position:fixed;overflow: hidden;display: none;justify-content: center;align-items: center;z-index: 999999999;height: 100%;width: 100%;color: transparent;background: #F1F3F9;visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0;",f="position: fixed;display: none;overflow: hidden;z-index: 999999999;width: 100%;height: 100%;transition: opacity 0.3s ease 0s;visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0; border: none",m=".app-loader {\n  text-align: center;\n  color: white;\n  margin-right: -30px;\n  width: 100%;\n  position: fixed;\n  top: 30vh\n}\n@-webkit-keyframes app-loader__spinner {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.app-loader__spinner {\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n}\n.app-loader__spinner div {\n  position: absolute;\n  -webkit-animation: app-loader__spinner linear 1s infinite;\n  animation: app-loader__spinner linear 1s infinite;\n  background: black;\n  width: 20px;\n  height: 40px;\n  border-radius: 40%;\n  -webkit-transform-origin: 5px 65px;\n  transform-origin: 5px 65px;\n}\n.app-loader__spinner div:nth-child(1) {\n  -webkit-transform: rotate(0deg);\n  transform: rotate(0deg);\n  -webkit-animation-delay: -0.916666666666667s;\n  animation-delay: -0.916666666666667s;\n}\n.app-loader__spinner div:nth-child(2) {\n  -webkit-transform: rotate(30deg);\n  transform: rotate(30deg);\n  -webkit-animation-delay: -0.833333333333333s;\n  animation-delay: -0.833333333333333s;\n}\n.app-loader__spinner div:nth-child(3) {\n  -webkit-transform: rotate(60deg);\n  transform: rotate(60deg);\n  -webkit-animation-delay: -0.75s;\n  animation-delay: -0.75s;\n}\n.app-loader__spinner div:nth-child(4) {\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n  -webkit-animation-delay: -0.666666666666667s;\n  animation-delay: -0.666666666666667s;\n}\n.app-loader__spinner div:nth-child(5) {\n  -webkit-transform: rotate(120deg);\n  transform: rotate(120deg);\n  -webkit-animation-delay: -0.583333333333333s;\n  animation-delay: -0.583333333333333s;\n}\n.app-loader__spinner div:nth-child(6) {\n  -webkit-transform: rotate(150deg);\n  transform: rotate(150deg);\n  -webkit-animation-delay: -0.5s;\n  animation-delay: -0.5s;\n}\n.app-loader__spinner div:nth-child(7) {\n  -webkit-transform: rotate(180deg);\n  transform: rotate(180deg);\n  -webkit-animation-delay: -0.416666666666667s;\n  animation-delay: -0.416666666666667s;\n}\n.app-loader__spinner div:nth-child(8) {\n  -webkit-transform: rotate(210deg);\n  transform: rotate(210deg);\n  -webkit-animation-delay: -0.333333333333333s;\n  animation-delay: -0.333333333333333s;\n}\n.app-loader__spinner div:nth-child(9) {\n  -webkit-transform: rotate(240deg);\n  transform: rotate(240deg);\n  -webkit-animation-delay: -0.25s;\n  animation-delay: -0.25s;\n}\n.app-loader__spinner div:nth-child(10) {\n  -webkit-transform: rotate(270deg);\n  transform: rotate(270deg);\n  -webkit-animation-delay: -0.166666666666667s;\n  animation-delay: -0.166666666666667s;\n}\n.app-loader__spinner div:nth-child(11) {\n  -webkit-transform: rotate(300deg);\n  transform: rotate(300deg);\n  -webkit-animation-delay: -0.083333333333333s;\n  animation-delay: -0.083333333333333s;\n}\n.app-loader__spinner div:nth-child(12) {\n  -webkit-transform: rotate(330deg);\n  transform: rotate(330deg);\n  -webkit-animation-delay: 0s;\n  animation-delay: 0s;\n}\n.app-loader__spinner {\n  -webkit-transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);\n  transform: translate(-20px, -20px) scale(0.2) translate(20px, 20px);\n}\n"}},o={};function r(e){var n=o[e];return void 0!==n||(n=o[e]={exports:{}},t[e](n,n.exports,r)),n.exports}r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var e={};{
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
r.r(e),r.d(e,{default:()=>u});var a=r(/*! ./types */"./src/types/index.ts"),i=r(/*! ./utils */"./src/utils.ts"),s=function(){return(s=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},n=function(e,i,s,l){return new(s=s||Promise)(function(t,n){function o(e){try{a(l.next(e))}catch(e){n(e)}}function r(e){try{a(l.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(o,r)}a((l=l.apply(e,i||[])).next())})},l=function(o,r){var a,i,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},d={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function e(t){return function(e){var n=[t,e];if(a)throw new TypeError("Generator is already executing.");for(;l=d&&n[d=0]?0:l;)try{if(a=1,i&&(s=2&n[0]?i.return:n[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,n[1])).done)return s;switch(i=0,(n=s?[2&n[0],s.value]:n)[0]){case 0:case 1:s=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3]))l.label=n[1];else if(6===n[0]&&l.label<s[1])l.label=s[1],s=n;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(n)}}n=r.call(o,l)}catch(e){n=[6,e],i=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}},d=function(e,n,t){if(t||2===arguments.length)for(var o,r=0,a=n.length;r<a;r++)!o&&r in n||((o=o||Array.prototype.slice.call(n,0,r))[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))};function c(e){if(!(this instanceof c))return new c(e);var n=p(d(d([],Object.keys(e),!0),Object.keys(null!=(n=e.metadata)?n:{}),!0),a.supportedProps);if(n.length)throw new Error("Unsupported props: ".concat(n.join(",")));n=(n="".concat(e.env).toUpperCase())!=a.ENVIRONMENT.PRODUCTION&&(n==a.ENVIRONMENT.DEVELOPMENT||n==a.ENVIRONMENT.TEST)?a.ENVIRONMENT.DEVELOPMENT:a.ENVIRONMENT.PRODUCTION;return e.env=n,e.theme?e.theme="dark"==String(e.theme).toLowerCase()?"dark":"light":e.theme="light",c.prototype.config=s({bearer:a.BEARER.MERCHANT},e),c.prototype.utils=(0,i.utils)(n),this}c.prototype.initializePay=function(){return n(this,void 0,void 0,function(){var n,t;return l(this,function(e){switch(e.label){case 0:if(Object.values(this.config).length<9)throw new Error("Konnadex Misconguration,Check initilization Parameters.");return n=(this.config.env||"").toUpperCase(),n=n!=a.ENVIRONMENT.PRODUCTION&&(n==a.ENVIRONMENT.DEVELOPMENT||n==a.ENVIRONMENT.TEST)?a.TEST_BACKEND_URL:a.LIVE_BACKEND_URL,[4,fetch(n)];case 1:return[4,e.sent().json()];case 2:if((n=e.sent())&&400<=n.status)throw new Error("Error in payment service");if(n.includes(String(this.config.currency).toUpperCase()))return t=c.prototype.utils.init({title:"KonnadexConfig",config:{key:this.config.key,reference:this.config.reference,metadata:this.config.metadata,amount:this.config.amount,bearer:this.config.bearer,currency:this.config.currency,network:this.config.network,env:this.config.env,theme:this.config.theme}}),c.prototype.iframe=t,c.prototype.onSuccess=this.config.onSuccess,c.prototype.onError=this.config.onError,c.prototype.onClose=this.config.onClose,this.openPay(),[2];throw new Error("Unsupported currency: ".concat(this.config.currency))}})})};var p=function(e,n){return e.filter(function(e){return!n.includes(e)})};c.prototype.openPay=function(){c.prototype.utils.openWidget({config:this.config}),c.prototype.eventHandler=function(e){if(e.data.appOrigin===this.origin)switch(e.data.type){case"ready":document.getElementById("pay-app-loader").style.display="none";break;case"konna.success":c.prototype.success(e.data);break;case"konna.exit":console.log(e.data.type),c.prototype.close(e.data);break;case"konna.error":c.prototype.error(e.data);break;case"konna.copy":"clipboard"in navigator?navigator.clipboard.writeText(e.data.data.RECIPIENT):document.execCommand("copy",!0,e.data.data.RECIPIENT)}}.bind(this),window.addEventListener("message",this.eventHandler,!1)},c.prototype.close=function(e){window.removeEventListener("message",this.eventHandler,!1),this.onClose(e),c.prototype.utils.closeWidget()},c.prototype.success=function(e){this.onSuccess(e)},c.prototype.error=function(e){this.onError(e)},window&&(window.KonnadexCheckout=c);const u=c}})();